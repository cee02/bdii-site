<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  

  <title>Lista de Componentes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }

    .container {
      max-width: 600px;
      margin: 20px auto;
      margin-left: 200px;
      margin-top: 60px;
    }

    .component-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .component-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .equipment-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .equipment-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .component-item {
      background-color: #fff;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .component-item:hover {
      background-color: #f1f1f1;
    }

    .equipment-item {
      background-color: #fff;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .equipment-item:hover {
      background-color: #f1f1f1;
    }

    .details-button,
    .remove-button {
      background-color: #3498db;
      color: #fff;
      padding: 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 240px;
    }

    .details-button:hover,
    .remove-button:hover {
      background-color: #03548b;
    }

    .confirmation-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .confirmation-box {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }

    .confirmation-box button {
      margin-top: 10px;
    }

    .component-details {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      margin-top: 20px;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      text-align: left;
      border: 2px solid #3498db;
    }

    .component-details h2 {
      color: #333;
      margin-bottom: 10px;
    }

    .component-details p {
      margin: 8px 0;
    }
    .component-details button {
      background-color: #3498db; 
      color: #fff;
      padding: 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .component-details button:hover {
      background-color: #03548b; 
    }
    
    .equipment-details {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      margin-top: 20px;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      text-align: left;
      border: 2px solid #3498db;
    }

    .equipment-details h2 {
      color: #333;
      margin-bottom: 10px;
    }

    .equipment-details p {
      margin: 8px 0;
    }
    .equipment-details button {
      background-color: #3498db; 
      color: #fff;
      padding: 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .equipment-details button:hover {
      background-color: #03548b; 
    }

    /* sidebar */

    .sidebar {
      height: 100%;
      width: 60px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #333;
      overflow-x: hidden;
      padding-top: 20px;
      transition: 0.5s;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .basket-icon {
    color: #3498db; /* Cor azul para o ícone de cesto (pode ajustar conforme necessário) */
    cursor: pointer;
    margin-left: 10px; /* Espaço entre o botão "Detalhes" e o ícone de cesto */
  }
    .sidebar:hover {
      width: 250px;
    }

    .menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .menu-text {
      display: none; /* Hide text content by default */
    }

    .menu a {
      text-decoration: none;
      color: white;
      padding: 15px;
      display: flex;
      align-items: center;
      transition: 0.3s;
    }

    .menu i {
      margin-right: 10px; /* Add some space between icon and text */
      display: inline; /* Show icons */
    }

    .menu a:hover {
      background-color: rgba(57, 91, 141, 0.973);
    }

    .sidebar:hover .menu-text {
      display: inline; /* Show text content on sidebar hover */
    }

    .user-profile {
      text-align: center;
      padding-bottom: 20px;
    }

    .user-profile img {
      width: 50px;
      border-radius: 50%;
    }

    /* Scrollable container for the table */
    .scrollable-container {
      max-height: 210px;
      overflow-y: scroll;
    }

    .table-title {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .checkbox-container {
      display: flex;
    align-items: center;
    cursor: pointer;
    margin-bottom: 15px;
    margin-left: -130px;
}
.checkbox-container input {
    margin-right: 5px; /* Adjust the space between the checkbox and label */
}
    .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 20px;
        width: 20px;
        background-color: #eee;
        border-radius: 3px;
    }

    .checkbox-container input:checked + .checkmark:after {
        content: '';
        position: absolute;
        left: 7px;
        top: 3px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
    }

    .right-container {
  position: fixed;
  top: 0;
  right: 0;
  width: 400px;
  height: 80%;
  background-color: #fff;
  border: 2px solid #3498db; 
  border-right: 2px solid #f4f4f4; 
  overflow-y: scroll;
  margin-right: 100px;
  margin-top: 50px;
  
}

.assembly-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.assembly-item {
  padding: 10px;
  border-bottom: 1px solid #ddd; 
}
.table-title1{
  margin-top: 10px;
    text-align: center;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
      border-bottom: 1px solid #3498db; 
}
.remove-button {
  background-color: #db3434;
  color: #fff;
  padding: 8px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.remove-button:hover {
  background-color: #03548b;
}
  </style>
</head>
<body>
  <div class="sidebar" id="sidebar">
    <div class="user-profile">
      <i class="fas fa-user"></i>
      <p>Nome do Usuário</p>
    </div>
    <ul class="menu">
      <li><a href="{% url 'dashboard' %}"><i class="fas fa-chart-line"></i><span class="menu-text">Dashboard</span></a></li>
      <li><a href="{% url 'registo_encomenda' %}"><i class="fas fa-clipboard-list"></i><span class="menu-text">Registo Encomenda</span></a></li>
      <li><a href="{% url 'producao_equipamentos' %}"><i class="fas fa-cogs"></i><span class="menu-text">Produção de Equipamentos</span></a></li>
      <li><a href="{% url 'registar_equipamento' %}"><i class="fas fa-plus"></i><span class="menu-text">Registar Equipamentos</span></a></li>
      <li><a href="{% url 'vendas_equipamentos' %}"><i class="fas fa-shopping-cart"></i><span class="menu-text">Vendas de Equipamentos</span></a></li>
      <li><a href="{% url 'gestao_clientes' %}"><i class="fas fa-users"></i><span class="menu-text">Gestão de Clientes</span></a></li>
      <br>
      <li><a href="#"><i class="fas fa-sign-out-alt"></i><span class="menu-text">Logout</span></a></li>
    </ul>
  </div>

 <!-- Secção de Componentes -->
  <div class="container">
    <div class="table-title">Lista de Componentes em Stock</div>
    <div class="scrollable-container">
      <table class="component-table">
        <tbody class="component-list">
          {% for componente in componentes %}
          <tr class="component-item" data-id="{{ componente.0 }}" data-nome="{{ componente.1 }}" data-descricao="{{ componente.2 }}" data-preco="{{ componente.3 }}">
            <td><span>{{ componente.1 }}</span></td>
            <td>
              <button class="details-button" onclick="showDetailscomponent(this)" style="margin-right: 150px;">Detalhes</button>
              <i class="fas fa-shopping-basket basket-icon" onclick="showAssemblyList('{{ componente.0 }}', '{{ componente.1 }}')" style="margin-right: 50px;"></i>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="right-container">
    <div class="table-title1">Lista de Montagem</div>
    <ul class="assembly-list" id="assemblyList">
      <!-- Assembly list items will be dynamically added here -->
    </ul>
  </div>

  <!-- Secção de Equipamentos -->
  <div class="container">
    <div class="table-title">Lista de Equipamentos</div>
    <div class="scrollable-container">
        <table class="equipment-table">
            <tbody class="equipment-list">
                <tr>
                    <td>
                        <h4 style="margin-left: 10px; display: inline-block;">Descrição</h4>
                        <h4 style="margin-left: 280px; display: inline-block;">Pronto para Armazenar</h4>
                    </td>
                </tr>
                {% for equipamento in equipamentos %}
                    <tr class="equipment-item" data-id="{{ equipamento.0 }}" data-tipo="{{ equipamento.1 }}" data-descricao="{{ equipamento.2 }}" data-preco="{{ equipamento.3 }}">
                        <td><span>{{ equipamento.1 }}</span></td>
                        <td>
                          <button class="details-button" onclick="showDetailsequipment(this)" style="margin-left: 170px;">Detalhes</button>
                      </td>
                        <td>
                         <label class="checkbox-container">
        <input type="checkbox" id="prontoParaArmazenar{{ equipamento.0 }}" {% if equipamento.4 %}checked{% endif %} disabled>
    </label>
                      </td>
                        
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


  <!-- Detalhes do Componente -->
  <div class="component-details" id="componentDetails">
    <h2>Detalhes do Componente</h2>
    <p><strong>Nome:</strong> <span id="componentNome"></span></p>
    <p><strong>Descrição:</strong> <span id="componentDescricao"></span></p>
    <p><strong>Preço:</strong> <span id="componentPreco"></span></p>

    <button onclick="hideDetailscomponent()">Fechar</button>
  </div>

  <!-- Detalhes do Equipamento -->
  <div class="equipment-details" id="equipmentDetails">
    <h2>Detalhes do Equipamento</h2>
    <p><strong>Tipo:</strong> <span id="equipmentTipo"></span></p>
    <p><strong>Descrição:</strong> <span id="equipmentDescricao"></span></p>
    <p><strong>Preço:</strong> <span id="equipmentPreco"></span></p>

    <button onclick="hideDetailsequipment()">Fechar</button>
  </div>

  <script>
    function showDetailscomponent(button) {
      const listItem = button.closest('.component-item');
      const componentNome = listItem.dataset.nome;
      const componentDescricao = listItem.dataset.descricao;
      const componentPreco = listItem.dataset.preco;
      // Preencher os detalhes do componente
      document.getElementById('componentNome').innerText = componentNome;
      document.getElementById('componentDescricao').innerText = componentDescricao;
      document.getElementById('componentPreco').innerText = componentPreco;

      // Exibir a seção de detalhes do componente
      document.getElementById('componentDetails').style.display = 'block';
    }

    function showDetailsequipment(button) {
      const listItem = button.closest('.equipment-item');
      const equipmentTipo = listItem.dataset.tipo;
      const equipmentDescricao = listItem.dataset.descricao;
      const equipmentPreco = listItem.dataset.preco;
      // Preencher os detalhes do componente
      document.getElementById('equipmentTipo').innerText = equipmentTipo;
      document.getElementById('equipmentDescricao').innerText = equipmentDescricao;
      document.getElementById('equipmentPreco').innerText = equipmentPreco;

      // Exibir a seção de detalhes do componente
      document.getElementById('equipmentDetails').style.display = 'block';
    }

    function hideDetailscomponent() {
      // Ocultar a seção de detalhes do componente
      document.getElementById('componentDetails').style.display = 'none';
    }

    function hideDetailsequipment() {
      // Ocultar a seção de detalhes do componente
      document.getElementById('equipmentDetails').style.display = 'none';
    }

    function showConfirmation(componentId) {
      // Exibir o modal de confirmação
      document.getElementById('confirmationModal').style.display = 'flex';
      // Set the component ID in a hidden input for later use
      document.getElementById('componentIdInput').value = componentId;
    }

    function hideConfirmation() {
      // Ocultar o modal de confirmação
      document.getElementById('confirmationModal').style.display = 'none';
    }

    function removeComponent() {
      // Get the component ID from the hidden input
      const componentId = document.getElementById('componentIdInput').value;
      // Implement your logic to remove the component using AJAX or Django form submission
      console.log('Removing component with ID:', componentId);
      // Ocultar o modal de confirmação
      hideConfirmation();
    }

function showAssemblyList(componentId, componentName) {
  const assemblyList = document.getElementById('assemblyList');
  // Crie um identificador único para cada item da lista
  const itemId = `assemblyItem_${componentId}`;
  
  // Adicione o item à lista de montagem
  const listItem = document.createElement('li');
  listItem.id = itemId;
  listItem.classList.add('assembly-item');
  listItem.innerHTML = `<span>Component ID: ${componentId}</span><br><span>Name: ${componentName}</span>`;
  
  // Adicione o botão de remoção
  const removeButton = document.createElement('button');
  removeButton.innerText = 'Remover';
  removeButton.classList.add('remove-button');  
  removeButton.onclick = function() {
    removeAssemblyItem(itemId);
  };
  
  listItem.appendChild(removeButton);
  assemblyList.appendChild(listItem);

  // Mostre o modal da lista de montagem
  document.getElementById('assemblyListModal').style.display = 'flex';
    }
    
    function removeAssemblyItem(itemId) {
  // Remova o item da lista de montagem pelo identificador único
  const assemblyItem = document.getElementById(itemId);
  if (assemblyItem) {
    assemblyItem.remove();
  }
}

  function hideAssemblyList() {
    // Hide the assembly list modal
    document.getElementById('assemblyListModal').style.display = 'none';
    // Clear the assembly list
    document.getElementById('assemblyList').innerHTML = '';
  }

  </script>

</body>
</html>
